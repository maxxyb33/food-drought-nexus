<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Web Mapping Template</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css" />
     <link rel="shortcut icon" href="img/logo.ico?" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Krona+One|Titillium+Web|Righteous" rel="stylesheet">


    <style>
        html, body { width: 100%; height: 100%; margin: 0; background: #fff; }
        #map { width: 100%; height: 75%; margin: 0; background: #fff; }
        .info-panel {
            line-height: 16px;
            width: 180px;
            position: absolute;
            z-index: 1000;
            left: 10px;
            bottom: 50%;
            color: #070707;
            padding: 6px 8px;
            background: rgba(243, 243, 243, 0.73);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
        }
        .info-panel i {
            width: 16px;
            height: 14px;
            line-height: 18px;
            float: left;
            margin-top: 2px;
            margin-right: 8px;
            opacity: 0.7;
        }
        .info-panel p {
            font-size: 12px;
            line-height: 16px;
            margin: 0;
        }

    </style>
    <!--add required stylesheets-->
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>  //using d3

    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>


    <!--<script type="text/javascript" src="https://cloudybay.github.io/leaflet.latlng-graticule/leaflet.latlng-graticule.js"></script>-->

</head>
<body>

<!--add a Bootstrap navbar-->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">

        <!--<div class="container-fluid">-->
        <!-- Brand and toggle get grouped for better mobile display -->
        <a class="navbar-brand" href="#">
            <!--convert the style value to a class and then add the class to the css file.-->
            <img src="img/logo.png"  width="10%" class="d-inline-block align-top">
        </a>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse">
            <!--Create class ml-auto for the navbar items you want on the right.-->
            <ul class="navbar-nav ml-auto" >
                <!--a simple top bar link-->
                <li class="nav-item">
                    <a class="nav-link" href="#">Topic 1</a>
                </li>
                <!--a top bar link which opens the url in a new page-->
                <li class="nav-item">
                    <a class="nav-link" href="#">Topic 2</a>
                </li>
                <!--a drop-down menu-->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" >Share To...</a>
                    <div class="dropdown-menu" >
                        <!--use font awesome icons-->
                        <a class="dropdown-item" href="#"> <i class="fa fa-facebook-square"></i> Facebook</a>
                        <a class="dropdown-item" href="#"> <i class="fa fa-twitter-square"></i> Twitter</a>
                        <a class="dropdown-item" href="#"> <i class="fa fa-link"></i> Short Url </a>
                    </div>
                </li>

                <!--use icons in the top bar menu-->
                <li>
                    <a class="nav-link" href="#"> <i class="fa fa-github fa-lg"></i>&nbsp;&nbsp;<span>Source Codes</span></a>
                </li>
                <!--an about page which open the url in a new page-->
                <li>
                    <a class= "nav-link" href="template3.html" target="_self">About</a>
                </li>
            </ul>
            <nav class="navbar navbar-dark bg-dark">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </nav>
        </div>
</nav>

<!--map container-->
<div id="map" class="map"></div>

<div class="info-panel">
    <h4>Total Population </h4>
    <p><b> (thousands) </b></p><br/>
    <!-- legend patch items -->
    <i style="background: #fbf9cf"></i> <p> Barley </p>
    <i style="background: #f7ebb2"></i> <p> Maize </p>
    <i style="background: #f3d885"></i> <p> Millet </p>
    <i style="background: #ffcd5c"></i> <p> Rice </p>
    <i style="background: #cc8740"></i> <p> Wheat </p>

<!--    &lt;!&ndash;poly line feature&ndash;&gt;
    &lt;!&ndash;svg editor http://jxnblk.com/paths/&ndash;&gt;
    <i><svg width="16" height="16">
        <path d='M0 16 L16 16 L16 0 L8 10 L0 0 Z' style="stroke-dasharray:2; stroke:rgb(0,45,129); stroke-width:3px;fill:rgba(9,73,255,0.78)"></path>
    </svg></i> <p> Country Area </p>

    &lt;!&ndash;drought tile image&ndash;&gt;
    <i img src="img/randomtile.jpg"></i>
    <p> Drought Map</p>

    &lt;!&ndash;no data symbol&ndash;&gt;
    <i><svg width="16" height="16" data-reactid=".0.1.1.0.0.1:$=11:$1.0.0.$masked.0">
        <pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4">
            <path d="M-1,1 l2,-2
       M0,4 l4,-4
       M3,5 l2,-2" style="stroke:black; stroke-width:0.5px" />
        </pattern>
        <rect x="0" y="0" width="100%" height="100%" fill="url(#diagonalHatch)"/>
    </svg></i> <p> No data </p>
    &lt;!&ndash;place holder&ndash;&gt;
    <br/>
    <br/>
    <p> we can change the look of these dashed lines.  </p>-->


</div>

<div>
    <h1 class="text-center" font-family="Krona One">
        Data Table
    </h1>


</div>

<div>
    <p class="text-center"> Data from the csv files</p>


</div>

<script>
    // 1. Create a map object.
    var map = L.map("map", {
        center: [40, 50],
        zoom: 2,
        maxZoom: 10,
        minZoom: 2,
        detectRetina: true // detect whether the sceen is high resolution or not.
    });

    // 2. Add a base map.
    L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png').addTo(map);


    //3. Read population data from CSV files
    d3.csv("assets/Population_2013.csv", function(data) {
        data.forEach(function(d) {
            d.number=+d.number;
            d.country_code=+d.country_code;
            d.population = +d.population;
        });
        console.log(data);
    });

    // 4. build up a set of colors from colorbrewer's dark2 category
    var colors = chroma.scale('Dark2').mode('lch').colors(9);

    // 6. Set function for color ramp
    colors = chroma.scale('OrRd').colors(5);
    function setColor(population) {
        var id = 0;
        if (population > 1000000) { id = 4; }
        else if (population > 100000 && population <= 1000000) { id = 3;console.log(population); }
        else if (population > 10000 && population <= 100000) { id = 2;console.log(population); }
        else if (population > 1000 &&  population <= 10000) { id = 1;console.log(population); }
        else  { id = 0; }
        return colors[id];
    }

    // 7. Set style function that sets fill color.md property equal to population
    function myCustomStyle(feature) {
        return {
            fillColor: setColor(feature.properties.populations),
            fillOpacity: 0.4,
            stroke: true,
            opacity: 1,
            weight: 1,
            color: '#b4b4b4',
            dashArray: '2'

        };
    }

    // 8. Add county polygons
    L.geoJson.ajax("assets/world.geojson", {
        style: myCustomStyle
    }).addTo(map);



    /*
    var myGeoJSONPath = 'assets/World_Simple.geojson';
    var myCustomStyle = {
        fill: true,
        fillColor: '#fff',
        fillOpacity: 0.1,
        //line specs
        stroke: true,
        opacity: 1,
        weight: 1,
        color: 'blue',
        dashArray: '2'
    }
    $.getJSON(myGeoJSONPath,function(data){
        //var map = L.map("map").setView([39.74739, -105], 4);
        L.geoJson(data, {
            clickable: true,
            style: myCustomStyle
        }).addTo(map);
    })
*/
   //L.tileLayer(' http://climate.calit2.uci.edu/MERRA/tile_mercator/SPI20152_dry/tile_{z}_{x}-{y}.png').addTo(map);
    //  L.tileLayer(' http://climate.calit2.uci.edu/MERRA/tile_mercator/SPI20162_dry/tile_{z}_{x}-{y}.png').addTo(map);


    //ADD IN color scheme overlay based on total production value???
    //    colors = chroma.scale('RdPu').colors(5); //colors = chroma.scale('OrRd').colors(5);

    //    function setColor(Value) {
    //        var id = 0;
    //        if (Value > 0) {
    //            id = 4;
    //        }
    //        else if (Value > 13 && Value <= 18) {
    //            id = 3;
    //        }
    //        else if (Value > 10 && Value <= 13) {
    //            id = 2;
    //        }
    //        else if (Value > 5 && Value <= 10) {
    //            id = 1;
    //        }
    //        else {
    //            id = 0;
    //        }
    //        return colors[id];
    //    }
/*
    function style() {
        return {
            //fillColor: setColor(feature.properties.NAME),
            fillOpacity: 0.1,
            weight: 1,
            opacity: 1,
            color: 'blue',
            dashArray: '10'
        };
    }
    var countries = null;
    countries = L.geoJson.ajax("assets/World_Simple.geojson", {
        style: style
    }).addTo(map); //...geojson, ([style: style}].addTo...
*/

</script>




</body>
</html>